<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>Panel de Administración</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-segment [(ngModel)]="currentView">
    <ion-segment-button value="list">
      <ion-label>Publicaciones</ion-label>
    </ion-segment-button>
    <ion-segment-button value="add">
      <ion-label>Agregar</ion-label>
    </ion-segment-button>
    <ion-segment-button value="users">
      <ion-label>Usuarios</ion-label>
    </ion-segment-button>
  </ion-segment>
  <!-- ADMINISTRAR POST -->
  <div *ngIf="currentView === 'list'">
    <ion-list>
      <ion-item-sliding *ngFor="let post of posts; let i = index">
        <ion-item>
          <ion-label>
            <h4>{{ post.title }}</h4>
            <p>{{ post.author }} - {{ post.date | date:'short' }}</p>
          </ion-label>
        </ion-item>
        <ion-item-options side="end">
          <ion-item-option color="primary" (click)="editPost(i)">
            <ion-icon slot="icon-only" name="create-outline"></ion-icon>
          </ion-item-option>
          <ion-item-option color="danger" (click)="deletePost(i)">
            <ion-icon slot="icon-only" name="trash-outline"></ion-icon>
          </ion-item-option>
        </ion-item-options>
      </ion-item-sliding>
    </ion-list>
  </div>
  <!-- AGREGAR POST -->
  <div *ngIf="currentView === 'add'">
    <form (ngSubmit)="addPost()">
      <ion-item>
        <ion-input label="Título" labelPlacement="floating" placeholder="Ingrese un título" type="text" required name="title" [(ngModel)]="newPost.title"></ion-input>
      </ion-item>
      <ion-item>
        <ion-input label="Contenido" labelPlacement="floating" placeholder="Ingrese contenido" type="text" required name="content" [(ngModel)]="newPost.content"></ion-input>
      </ion-item>
      <ion-item>
        <ion-input label="Autor" labelPlacement="floating" placeholder="Ingrese contenido" type="text" required name="author" [(ngModel)]="newPost.author"></ion-input>
      </ion-item>
      <ion-button expand="block" type="submit" class="ion-margin-top">Agregar Publicación</ion-button>
    </form>
  </div>
  <!-- USUARIOS -->
  <div *ngIf="currentView === 'users'">
    <ion-list>
      <ion-item-sliding *ngFor="let usuario of activos; let i = index">
        <ion-item>
          <ion-label>
            <h4>{{ usuario.author }}</h4>
            <p>{{ usuario.estado }}</p>
          </ion-label>
        </ion-item>
        <ion-item-options side="end">
          <ion-item-option color="danger" (click)="banUser(i)">
            <ion-icon slot="icon-only" name="ban-outline"></ion-icon>
          </ion-item-option>
        </ion-item-options>
      </ion-item-sliding>
    </ion-list>
  </div>
  <!-- USUARIOS BANEADOS -->
  <div *ngIf="currentView === 'users'">
    <ion-list>
      <ion-item-sliding *ngFor="let usuario of baneados; let i = index">
        <ion-item>
          <ion-label>
            <h4>{{ usuario.author }}</h4>
            <p>{{ usuario.estado }}</p>
          </ion-label>
        </ion-item>
        <ion-item-options side="end">
          <ion-item-option color="success" (click)="unbanUser(i)">
            <ion-icon slot="icon-only" name="checkmark-circle-outline"></ion-icon>
          </ion-item-option>
        </ion-item-options>
      </ion-item-sliding>
    </ion-list>
  </div>
</ion-content>
