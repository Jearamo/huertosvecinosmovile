<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Testeos</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-segment (ionChange)="segmentChanged($event)" value="publicaciones">
    <ion-segment-button value="publicaciones">
      <ion-label>Publicaciones</ion-label>
    </ion-segment-button>
    <ion-segment-button value="usuarios">
      <ion-label>Usuarios</ion-label>
    </ion-segment-button>
    <ion-segment-button value="reportes">
      <ion-label>Reportes</ion-label>
    </ion-segment-button>
  </ion-segment>

  <!-- Publicaciones -->
  <div *ngIf="currentSegment === 'publicaciones'">
    <ion-list>
      <ion-item *ngFor="let pub of publicaciones">
        <ion-label>
          <h2>{{ pub.title }}</h2>
          <p>{{ pub.content }}</p>
        </ion-label>
        <ion-button (click)="editPublicacion(pub)">Editar</ion-button>
        <ion-button (click)="deletePublicacion(pub.post_id)">Eliminar</ion-button>
        <ion-button (click)="openComments(pub.post_id)">Ver comentarios</ion-button>
      </ion-item>
    </ion-list>
    <ion-button expand="block" (click)="addPublicacion()">Agregar Publicaci√≥n</ion-button>
  </div>

  <!-- Usuarios -->
  <div *ngIf="currentSegment === 'usuarios'">
    <ion-list>
      <ion-item *ngFor="let user of usuarios">
        <ion-label>
          <h2>{{ user.nick_name }}</h2>
          <p>{{ user.email }}</p>
        </ion-label>
      </ion-item>
    </ion-list>
    <ion-button expand="block" (click)="addUsuario()">Agregar Usuario</ion-button>
  </div>

  <!-- Reportes -->
  <div *ngIf="currentSegment === 'reportes'">
    <ion-list>
      <ion-item *ngFor="let reporte of reportes">
        <ion-label>
          <h2>{{ reporte.reason }}</h2>
          <p>Estado: {{ reporte.status }} | Tipo: {{ reporte.tipo }}</p>
        </ion-label>
      </ion-item>
    </ion-list>
    <ion-button expand="block" (click)="addReporte()">Agregar Reporte</ion-button>
  </div>

  <!-- Comentarios -->
  <ion-list *ngIf="comentarios.length > 0">
    <ion-item *ngFor="let comentario of comentarios">
      <ion-label>
        <h2>{{ comentario.nick_name }}</h2>
        <p>{{ comentario.content }}</p>
        <p>{{ comentario.created_date | date:'medium' }}</p>
      </ion-label>
      <ion-buttons slot="end">
        <ion-button (click)="responder(comentario.comment_id)">Responder</ion-button>
        <ion-button (click)="reportar(comentario.comment_id)">Reportar</ion-button>
      </ion-buttons>
    </ion-item>
  </ion-list>

  <ion-footer>
    <ion-toolbar>
      <ion-button expand="block" (click)="comentar()">Agregar Comentario</ion-button>
    </ion-toolbar>
  </ion-footer>
</ion-content>